module:
  description: Hello world container service
  type: container
  services:
    hello-container:
      command: [npm, start]
      test: [npm, run, integ]
      ports:
        http:
          containerPort: 8080
      endpoints:
        - paths: [/hello]
          port: http
      healthCheck:
        httpGet:
          path: /_ah/health
          port: http
      dependencies:
        - hello-function
      env:
        FUNCTION_ENDPOINT: ${dependencies.hello-function.outputs.endpoint}
  build:
    dependencies:
      - hello-npm-package
  test:
    unit:
      command: [npm, test]
